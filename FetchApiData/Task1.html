<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>University Search by Country</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            body { padding-top: 2rem; }
            .card-link { word-break: break-word; }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="row mb-4">
                <div class="col-md-8 mx-auto">
                    <h1 class="h4 mb-3 text-center">Search Universities by Country</h1>
                    <div class="input-group">
                        <input id="countryInput" type="text" class="form-control" placeholder="Enter country (e.g. India)" value="India" aria-label="Country">
                        <button id="searchBtn" class="btn btn-primary">Search (JS)</button>
                        <button id="searchBtnJQ" class="btn btn-outline-secondary">Search (jQuery)</button>
                    </div>
                    <div class="form-text">Try countries like: India, United States, Canada, Australia â€” choose JS or jQuery.</div>
                </div>
            </div>

            <div class="row">
                <div class="col-12" id="statusArea"></div>
            </div>

            <div class="row" id="resultsRow"></div>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJ+YRF7vYhF7C2b6k9Y+7Gk0zY4YfXhZ+3y0s=" crossorigin="anonymous"></script>
        <script>
            const statusArea = document.getElementById('statusArea');
            const resultsRow = document.getElementById('resultsRow');
            const countryInput = document.getElementById('countryInput');
            const searchBtn = document.getElementById('searchBtn');

            async function fetchUniversities(country) {
                if (!country || !country.trim()) return;
                const encoded = encodeURIComponent(country.trim());
                const url = `https://universities.hipolabs.com/search?country=${encoded}`;

                resultsRow.innerHTML = '';
                statusArea.innerHTML = `<div class="d-flex justify-content-center my-3"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>`;

                try {
                    const res = await fetch(url);
                    if (!res.ok) throw new Error(res.status + ' ' + res.statusText);
                    const data = await res.json();
                    renderResults(data, country);
                } catch (err) {
                    statusArea.innerHTML = `<div class="alert alert-danger">Error fetching data: ${err.message}</div>`;
                }
            }

            function renderResults(list, country) {
                statusArea.innerHTML = `<div class="mb-3">Found <strong>${list.length}</strong> universities for <strong>${escapeHtml(country)}</strong>.</div>`;
                if (!list.length) return;

                const fragment = document.createDocumentFragment();
                list.forEach(univ => {
                    const col = document.createElement('div');
                    col.className = 'col-md-6 col-lg-4 mb-3';

                    const card = document.createElement('div');
                    card.className = 'card h-100 shadow-sm';

                    const body = document.createElement('div');
                    body.className = 'card-body d-flex flex-column';

                    const title = document.createElement('h5');
                    title.className = 'card-title';
                    title.textContent = univ.name || 'Unnamed';

                    const subtitle = document.createElement('h6');
                    subtitle.className = 'card-subtitle mb-2 text-muted';
                    subtitle.textContent = univ['country'] + (univ['state-province'] ? (', ' + univ['state-province']) : '');

                    const listEl = document.createElement('ul');
                    listEl.className = 'list-unstyled mt-auto mb-0';

                    (univ.web_pages || []).forEach(url => {
                        const li = document.createElement('li');
                        li.innerHTML = `<a class="card-link" href="${escapeAttr(url)}" target="_blank" rel="noopener noreferrer">${escapeHtml(url)}</a>`;
                        listEl.appendChild(li);
                    });

                    body.appendChild(title);
                    body.appendChild(subtitle);
                    body.appendChild(listEl);
                    card.appendChild(body);
                    col.appendChild(card);
                    fragment.appendChild(col);
                });

                resultsRow.appendChild(fragment);
            }

            function escapeHtml(text) {
                if (text === null || text === undefined) return '';
                return String(text).replace(/[&<>"']/g, function (s) {
                    return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[s];
                });
            }

            function escapeAttr(text) {
                return escapeHtml(text).replace(/\"/g, '&quot;');
            }

            // jQuery AJAX alternative
            async function fetchUniversitiesJQ(country) {
                if (!country || !country.trim()) return;
                const encoded = encodeURIComponent(country.trim());
                const url = `https://universities.hipolabs.com/search?country=${encoded}`;

                resultsRow.innerHTML = '';
                statusArea.innerHTML = `<div class="d-flex justify-content-center my-3"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>`;

                try {
                    $.ajax({
                        url: url,
                        method: 'GET',
                        dataType: 'json',
                        success: function(data) { renderResults(data, country); },
                        error: function(xhr, status, err) {
                            statusArea.innerHTML = `<div class="alert alert-danger">Error fetching data: ${escapeHtml(status)} ${escapeHtml(err || '')}</div>`;
                        }
                    });
                } catch (err) {
                    statusArea.innerHTML = `<div class="alert alert-danger">Error fetching data: ${err.message}</div>`;
                }
            }

            // Events
            searchBtn.addEventListener('click', () => fetchUniversities(countryInput.value));
            document.getElementById('searchBtnJQ').addEventListener('click', () => fetchUniversitiesJQ(countryInput.value));
            countryInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') fetchUniversities(countryInput.value); });

            // Initial load
            window.addEventListener('load', () => fetchUniversities(countryInput.value));
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script>